<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>twoc population growth calculator</title>
<script
src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js">
</script>
<style>
body {
background-color: rgb(208, 164, 230);
height: 100%;
display: flex;
justify-content: center;
align-items: center;
}
.fish {
display: flex;
margin: 5px 0;
flex-direction: column;
align-items: center
</style>
</head>

<body>

<div id="grahh">
<h1 id="hi">twoc population growth/decline tool thingy</h1>
<div class="fish"> <h1 id="the">Population will appear here</h1> </div>
<div class="fish">
<label for="years">Years:</label>
<input type="number" id="years" value="20">
</div>
<div class="fish">
<label for="bonus">Growth Bonus</label>
<input type="number" id="bonus" value="0" step="0.25">
</div>
<div class="fish">
<label for="growthInput">Growth Rate (higher number = smaller amount):</label>
<input type="number" id="growth" value="0.5" step="0.01">
</div>
<div class="fish">
<label for="decay">Decay Rate (lower number = smaller amount):</label>
<input type="number" id="decay" value="0.25" step="0.01">
</div>
<div class="fish">
<label for="start_pop">PopulationInput:</label>
<input type="number" id="start_pop" value="500" step="1">
</div>
<div class="fish">
  <button id="wawa">calculate</button>
</div>
<canvas id="Population_Chart" style="width:100%;max-width:600px"></canvas>
</div>
<script>

const theChart = new Chart(document.getElementById("Population_Chart"), {
  type: "line",
  data: {
    labels: [0,20],
    datasets: [{
      fill: false,
      lineTension: 0,
      backgroundColor: "rgba(0,0,255,1.0)",
      borderColor: "rgba(0,0,255,1.0)",
      data: [0,500]
    }]
  },
  options: {
    plugins: {
      legend: {display:false},
      title: {
        display: true,
        text: "Population Growth Chart",
        font: {size:24}
      }
    }
  }
});
function updateChart(years,population,chart) {
	theChart.data.labels = [0,years];
	theChart.data.datasets[0].data = population;
	theChart.update();
}
	
  document.getElementById("wawa").addEventListener("click", population_thingy);
function population_thingy() {
var years = Number(document.getElementById("years").value);
var growth = Number(document.getElementById("growth").value);
var decay = Number(document.getElementById("decay").value);
var start_pop = Number(document.getElementById("start_pop").value);
var bonus = Number(document.getElementById("bonus").value);
var years2 = [];
var pop = [start_pop];
	for (let i = 0; i < years; i++) {
  		m= 1 - growth * Math.exp(-decay * (i+bonus));
    		let new_pop = pop[pop.length - 1]*m+bonus+(Math.random()*i*growth);
    		pop.push(new_pop);
		years2.push[i]
	}
	let total = 0
	for (let wa of pop) {
  		total += wa;
	}
console.log(typeof pop[0]);
updateChart(years,pop,theChart)
document.getElementById("the").innerHTML = total.toFixed(2);
}
</script>

</body>
</html>
